/**
 * Internationalization (i18n) System for Desktop App
 * 
 * Supports 7 languages: en, es, fr, de, ja, zh, fa
 */

import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export type Locale = 'en' | 'es' | 'fr' | 'de' | 'ja' | 'zh' | 'fa';

export interface LocaleInfo {
  code: Locale;
  name: string;
  nativeName: string;
  direction: 'ltr' | 'rtl';
}

export const SUPPORTED_LOCALES: LocaleInfo[] = [
  { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr' },
  { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr' },
  { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr' },
  { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr' },
  { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr' },
  { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr' },
  { code: 'fa', name: 'Persian', nativeName: 'فارسی', direction: 'rtl' },
];

// Translation keys type
export type TranslationKey = keyof typeof translations.en;

// All translations
export const translations = {
  en: {
    // Common
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.delete': 'Delete',
    'common.edit': 'Edit',
    'common.create': 'Create',
    'common.search': 'Search',
    'common.settings': 'Settings',
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.success': 'Success',
    'common.confirm': 'Confirm',
    'common.close': 'Close',
    'common.back': 'Back',
    'common.next': 'Next',
    'common.previous': 'Previous',
    'common.all': 'All',
    'common.none': 'None',
    'common.yes': 'Yes',
    'common.no': 'No',

    // Navigation
    'nav.dashboard': 'Dashboard',
    'nav.notes': 'Notes',
    'nav.tasks': 'Tasks',
    'nav.projects': 'Projects',
    'nav.calendar': 'Calendar',
    'nav.habits': 'Habits',
    'nav.goals': 'Goals',
    'nav.health': 'Health',
    'nav.social': 'Social',
    'nav.settings': 'Settings',
    'nav.sync': 'Sync',

    // Dashboard
    'dashboard.title': 'Dashboard',
    'dashboard.welcome': 'Welcome back',
    'dashboard.widgets': 'Widgets',
    'dashboard.customize': 'Customize Dashboard',
    'dashboard.focusMode': 'Focus Mode',
    'dashboard.quickCapture': 'Quick Capture',

    // Notes
    'notes.title': 'Notes',
    'notes.new': 'New Note',
    'notes.untitled': 'Untitled',
    'notes.lastEdited': 'Last edited',
    'notes.tags': 'Tags',
    'notes.backlinks': 'Backlinks',
    'notes.noNotes': 'No notes yet',

    // Tasks
    'tasks.title': 'Tasks',
    'tasks.new': 'New Task',
    'tasks.completed': 'Completed',
    'tasks.pending': 'Pending',
    'tasks.overdue': 'Overdue',
    'tasks.dueToday': 'Due Today',
    'tasks.priority': 'Priority',
    'tasks.high': 'High',
    'tasks.medium': 'Medium',
    'tasks.low': 'Low',

    // Projects
    'projects.title': 'Projects',
    'projects.new': 'New Project',
    'projects.active': 'Active',
    'projects.archived': 'Archived',
    'projects.overview': 'Overview',
    'projects.timeline': 'Timeline',
    'projects.kanban': 'Kanban',
    'projects.risks': 'Risks',

    // Settings
    'settings.title': 'Settings',
    'settings.general': 'General',
    'settings.appearance': 'Appearance',
    'settings.language': 'Language',
    'settings.theme': 'Theme',
    'settings.darkMode': 'Dark Mode',
    'settings.lightMode': 'Light Mode',
    'settings.systemTheme': 'System',
    'settings.sync': 'Sync',
    'settings.backup': 'Backup',
    'settings.security': 'Security',
    'settings.about': 'About',
    'settings.widgets': 'Widgets',
    'settings.features': 'Features',

    // Sync
    'sync.title': 'Sync',
    'sync.devices': 'Devices',
    'sync.history': 'History',
    'sync.conflicts': 'Conflicts',
    'sync.lastSync': 'Last Sync',
    'sync.syncing': 'Syncing...',
    'sync.syncNow': 'Sync Now',
    'sync.noDevices': 'No devices paired',

    // AI
    'ai.title': 'AI Assistant',
    'ai.chat': 'Chat',
    'ai.summarize': 'Summarize',
    'ai.generate': 'Generate',
    'ai.analyze': 'Analyze',
    'ai.localModel': 'Local Model',
    'ai.cloudModel': 'Cloud Model',
    'ai.processing': 'Processing...',

    // Widgets
    'widgets.quickStats': 'Quick Stats',
    'widgets.recentNotes': 'Recent Notes',
    'widgets.upcomingTasks': 'Upcoming Tasks',
    'widgets.habits': 'Habits',
    'widgets.goals': 'Goals',
    'widgets.calendar': 'Calendar',
    'widgets.focusTimer': 'Focus Timer',
    'widgets.mood': 'Mood Tracker',
    'widgets.health': 'Health',
    'widgets.social': 'Social Feed',

    // Errors
    'error.generic': 'Something went wrong',
    'error.network': 'Network error',
    'error.notFound': 'Not found',
    'error.unauthorized': 'Unauthorized',
    'error.validation': 'Validation error',
  },
  es: {
    'common.save': 'Guardar',
    'common.cancel': 'Cancelar',
    'common.delete': 'Eliminar',
    'common.edit': 'Editar',
    'common.create': 'Crear',
    'common.search': 'Buscar',
    'common.settings': 'Configuración',
    'common.loading': 'Cargando...',
    'common.error': 'Error',
    'common.success': 'Éxito',
    'common.confirm': 'Confirmar',
    'common.close': 'Cerrar',
    'common.back': 'Atrás',
    'common.next': 'Siguiente',
    'common.previous': 'Anterior',
    'common.all': 'Todo',
    'common.none': 'Ninguno',
    'common.yes': 'Sí',
    'common.no': 'No',
    'nav.dashboard': 'Panel',
    'nav.notes': 'Notas',
    'nav.tasks': 'Tareas',
    'nav.projects': 'Proyectos',
    'nav.calendar': 'Calendario',
    'nav.habits': 'Hábitos',
    'nav.goals': 'Metas',
    'nav.health': 'Salud',
    'nav.social': 'Social',
    'nav.settings': 'Configuración',
    'nav.sync': 'Sincronizar',
    'dashboard.title': 'Panel',
    'dashboard.welcome': 'Bienvenido',
    'dashboard.widgets': 'Widgets',
    'dashboard.customize': 'Personalizar Panel',
    'dashboard.focusMode': 'Modo Enfoque',
    'dashboard.quickCapture': 'Captura Rápida',
    'notes.title': 'Notas',
    'notes.new': 'Nueva Nota',
    'notes.untitled': 'Sin título',
    'notes.lastEdited': 'Última edición',
    'notes.tags': 'Etiquetas',
    'notes.backlinks': 'Enlaces',
    'notes.noNotes': 'Sin notas',
    'tasks.title': 'Tareas',
    'tasks.new': 'Nueva Tarea',
    'tasks.completed': 'Completadas',
    'tasks.pending': 'Pendientes',
    'tasks.overdue': 'Vencidas',
    'tasks.dueToday': 'Para Hoy',
    'tasks.priority': 'Prioridad',
    'tasks.high': 'Alta',
    'tasks.medium': 'Media',
    'tasks.low': 'Baja',
    'projects.title': 'Proyectos',
    'projects.new': 'Nuevo Proyecto',
    'projects.active': 'Activos',
    'projects.archived': 'Archivados',
    'projects.overview': 'Resumen',
    'projects.timeline': 'Cronograma',
    'projects.kanban': 'Kanban',
    'projects.risks': 'Riesgos',
    'settings.title': 'Configuración',
    'settings.general': 'General',
    'settings.appearance': 'Apariencia',
    'settings.language': 'Idioma',
    'settings.theme': 'Tema',
    'settings.darkMode': 'Modo Oscuro',
    'settings.lightMode': 'Modo Claro',
    'settings.systemTheme': 'Sistema',
    'settings.sync': 'Sincronizar',
    'settings.backup': 'Respaldo',
    'settings.security': 'Seguridad',
    'settings.about': 'Acerca de',
    'settings.widgets': 'Widgets',
    'settings.features': 'Funciones',
    'sync.title': 'Sincronizar',
    'sync.devices': 'Dispositivos',
    'sync.history': 'Historial',
    'sync.conflicts': 'Conflictos',
    'sync.lastSync': 'Última Sincronización',
    'sync.syncing': 'Sincronizando...',
    'sync.syncNow': 'Sincronizar Ahora',
    'sync.noDevices': 'Sin dispositivos',
    'ai.title': 'Asistente IA',
    'ai.chat': 'Chat',
    'ai.summarize': 'Resumir',
    'ai.generate': 'Generar',
    'ai.analyze': 'Analizar',
    'ai.localModel': 'Modelo Local',
    'ai.cloudModel': 'Modelo en la Nube',
    'ai.processing': 'Procesando...',
    'widgets.quickStats': 'Estadísticas',
    'widgets.recentNotes': 'Notas Recientes',
    'widgets.upcomingTasks': 'Próximas Tareas',
    'widgets.habits': 'Hábitos',
    'widgets.goals': 'Metas',
    'widgets.calendar': 'Calendario',
    'widgets.focusTimer': 'Temporizador',
    'widgets.mood': 'Estado de Ánimo',
    'widgets.health': 'Salud',
    'widgets.social': 'Social',
    'error.generic': 'Algo salió mal',
    'error.network': 'Error de red',
    'error.notFound': 'No encontrado',
    'error.unauthorized': 'No autorizado',
    'error.validation': 'Error de validación',
  },
  fr: {
    'common.save': 'Enregistrer',
    'common.cancel': 'Annuler',
    'common.delete': 'Supprimer',
    'common.edit': 'Modifier',
    'common.create': 'Créer',
    'common.search': 'Rechercher',
    'common.settings': 'Paramètres',
    'common.loading': 'Chargement...',
    'common.error': 'Erreur',
    'common.success': 'Succès',
    'common.confirm': 'Confirmer',
    'common.close': 'Fermer',
    'common.back': 'Retour',
    'common.next': 'Suivant',
    'common.previous': 'Précédent',
    'common.all': 'Tout',
    'common.none': 'Aucun',
    'common.yes': 'Oui',
    'common.no': 'Non',
    'nav.dashboard': 'Tableau de bord',
    'nav.notes': 'Notes',
    'nav.tasks': 'Tâches',
    'nav.projects': 'Projets',
    'nav.calendar': 'Calendrier',
    'nav.habits': 'Habitudes',
    'nav.goals': 'Objectifs',
    'nav.health': 'Santé',
    'nav.social': 'Social',
    'nav.settings': 'Paramètres',
    'nav.sync': 'Synchronisation',
    'dashboard.title': 'Tableau de bord',
    'dashboard.welcome': 'Bienvenue',
    'dashboard.widgets': 'Widgets',
    'dashboard.customize': 'Personnaliser',
    'dashboard.focusMode': 'Mode Focus',
    'dashboard.quickCapture': 'Capture Rapide',
    'notes.title': 'Notes',
    'notes.new': 'Nouvelle Note',
    'notes.untitled': 'Sans titre',
    'notes.lastEdited': 'Dernière modification',
    'notes.tags': 'Tags',
    'notes.backlinks': 'Liens retour',
    'notes.noNotes': 'Aucune note',
    'tasks.title': 'Tâches',
    'tasks.new': 'Nouvelle Tâche',
    'tasks.completed': 'Terminées',
    'tasks.pending': 'En attente',
    'tasks.overdue': 'En retard',
    'tasks.dueToday': 'Pour aujourd\'hui',
    'tasks.priority': 'Priorité',
    'tasks.high': 'Haute',
    'tasks.medium': 'Moyenne',
    'tasks.low': 'Basse',
    'projects.title': 'Projets',
    'projects.new': 'Nouveau Projet',
    'projects.active': 'Actifs',
    'projects.archived': 'Archivés',
    'projects.overview': 'Aperçu',
    'projects.timeline': 'Chronologie',
    'projects.kanban': 'Kanban',
    'projects.risks': 'Risques',
    'settings.title': 'Paramètres',
    'settings.general': 'Général',
    'settings.appearance': 'Apparence',
    'settings.language': 'Langue',
    'settings.theme': 'Thème',
    'settings.darkMode': 'Mode Sombre',
    'settings.lightMode': 'Mode Clair',
    'settings.systemTheme': 'Système',
    'settings.sync': 'Synchronisation',
    'settings.backup': 'Sauvegarde',
    'settings.security': 'Sécurité',
    'settings.about': 'À propos',
    'settings.widgets': 'Widgets',
    'settings.features': 'Fonctionnalités',
    'sync.title': 'Synchronisation',
    'sync.devices': 'Appareils',
    'sync.history': 'Historique',
    'sync.conflicts': 'Conflits',
    'sync.lastSync': 'Dernière sync',
    'sync.syncing': 'Synchronisation...',
    'sync.syncNow': 'Synchroniser',
    'sync.noDevices': 'Aucun appareil',
    'ai.title': 'Assistant IA',
    'ai.chat': 'Chat',
    'ai.summarize': 'Résumer',
    'ai.generate': 'Générer',
    'ai.analyze': 'Analyser',
    'ai.localModel': 'Modèle Local',
    'ai.cloudModel': 'Modèle Cloud',
    'ai.processing': 'Traitement...',
    'widgets.quickStats': 'Statistiques',
    'widgets.recentNotes': 'Notes Récentes',
    'widgets.upcomingTasks': 'Tâches à Venir',
    'widgets.habits': 'Habitudes',
    'widgets.goals': 'Objectifs',
    'widgets.calendar': 'Calendrier',
    'widgets.focusTimer': 'Minuterie',
    'widgets.mood': 'Humeur',
    'widgets.health': 'Santé',
    'widgets.social': 'Social',
    'error.generic': 'Une erreur est survenue',
    'error.network': 'Erreur réseau',
    'error.notFound': 'Non trouvé',
    'error.unauthorized': 'Non autorisé',
    'error.validation': 'Erreur de validation',
  },
  de: {
    'common.save': 'Speichern',
    'common.cancel': 'Abbrechen',
    'common.delete': 'Löschen',
    'common.edit': 'Bearbeiten',
    'common.create': 'Erstellen',
    'common.search': 'Suchen',
    'common.settings': 'Einstellungen',
    'common.loading': 'Laden...',
    'common.error': 'Fehler',
    'common.success': 'Erfolg',
    'common.confirm': 'Bestätigen',
    'common.close': 'Schließen',
    'common.back': 'Zurück',
    'common.next': 'Weiter',
    'common.previous': 'Zurück',
    'common.all': 'Alle',
    'common.none': 'Keine',
    'common.yes': 'Ja',
    'common.no': 'Nein',
    'nav.dashboard': 'Dashboard',
    'nav.notes': 'Notizen',
    'nav.tasks': 'Aufgaben',
    'nav.projects': 'Projekte',
    'nav.calendar': 'Kalender',
    'nav.habits': 'Gewohnheiten',
    'nav.goals': 'Ziele',
    'nav.health': 'Gesundheit',
    'nav.social': 'Sozial',
    'nav.settings': 'Einstellungen',
    'nav.sync': 'Sync',
    'dashboard.title': 'Dashboard',
    'dashboard.welcome': 'Willkommen',
    'dashboard.widgets': 'Widgets',
    'dashboard.customize': 'Anpassen',
    'dashboard.focusMode': 'Fokus-Modus',
    'dashboard.quickCapture': 'Schnellerfassung',
    'notes.title': 'Notizen',
    'notes.new': 'Neue Notiz',
    'notes.untitled': 'Ohne Titel',
    'notes.lastEdited': 'Zuletzt bearbeitet',
    'notes.tags': 'Tags',
    'notes.backlinks': 'Rückverweise',
    'notes.noNotes': 'Keine Notizen',
    'tasks.title': 'Aufgaben',
    'tasks.new': 'Neue Aufgabe',
    'tasks.completed': 'Erledigt',
    'tasks.pending': 'Ausstehend',
    'tasks.overdue': 'Überfällig',
    'tasks.dueToday': 'Heute fällig',
    'tasks.priority': 'Priorität',
    'tasks.high': 'Hoch',
    'tasks.medium': 'Mittel',
    'tasks.low': 'Niedrig',
    'projects.title': 'Projekte',
    'projects.new': 'Neues Projekt',
    'projects.active': 'Aktiv',
    'projects.archived': 'Archiviert',
    'projects.overview': 'Übersicht',
    'projects.timeline': 'Zeitplan',
    'projects.kanban': 'Kanban',
    'projects.risks': 'Risiken',
    'settings.title': 'Einstellungen',
    'settings.general': 'Allgemein',
    'settings.appearance': 'Erscheinung',
    'settings.language': 'Sprache',
    'settings.theme': 'Thema',
    'settings.darkMode': 'Dunkelmodus',
    'settings.lightMode': 'Hellmodus',
    'settings.systemTheme': 'System',
    'settings.sync': 'Synchronisation',
    'settings.backup': 'Sicherung',
    'settings.security': 'Sicherheit',
    'settings.about': 'Über',
    'settings.widgets': 'Widgets',
    'settings.features': 'Funktionen',
    'sync.title': 'Synchronisation',
    'sync.devices': 'Geräte',
    'sync.history': 'Verlauf',
    'sync.conflicts': 'Konflikte',
    'sync.lastSync': 'Letzte Sync',
    'sync.syncing': 'Synchronisieren...',
    'sync.syncNow': 'Jetzt synchronisieren',
    'sync.noDevices': 'Keine Geräte',
    'ai.title': 'KI-Assistent',
    'ai.chat': 'Chat',
    'ai.summarize': 'Zusammenfassen',
    'ai.generate': 'Generieren',
    'ai.analyze': 'Analysieren',
    'ai.localModel': 'Lokales Modell',
    'ai.cloudModel': 'Cloud-Modell',
    'ai.processing': 'Verarbeitung...',
    'widgets.quickStats': 'Statistiken',
    'widgets.recentNotes': 'Letzte Notizen',
    'widgets.upcomingTasks': 'Nächste Aufgaben',
    'widgets.habits': 'Gewohnheiten',
    'widgets.goals': 'Ziele',
    'widgets.calendar': 'Kalender',
    'widgets.focusTimer': 'Timer',
    'widgets.mood': 'Stimmung',
    'widgets.health': 'Gesundheit',
    'widgets.social': 'Sozial',
    'error.generic': 'Ein Fehler ist aufgetreten',
    'error.network': 'Netzwerkfehler',
    'error.notFound': 'Nicht gefunden',
    'error.unauthorized': 'Nicht autorisiert',
    'error.validation': 'Validierungsfehler',
  },
  ja: {
    'common.save': '保存',
    'common.cancel': 'キャンセル',
    'common.delete': '削除',
    'common.edit': '編集',
    'common.create': '作成',
    'common.search': '検索',
    'common.settings': '設定',
    'common.loading': '読み込み中...',
    'common.error': 'エラー',
    'common.success': '成功',
    'common.confirm': '確認',
    'common.close': '閉じる',
    'common.back': '戻る',
    'common.next': '次へ',
    'common.previous': '前へ',
    'common.all': 'すべて',
    'common.none': 'なし',
    'common.yes': 'はい',
    'common.no': 'いいえ',
    'nav.dashboard': 'ダッシュボード',
    'nav.notes': 'ノート',
    'nav.tasks': 'タスク',
    'nav.projects': 'プロジェクト',
    'nav.calendar': 'カレンダー',
    'nav.habits': '習慣',
    'nav.goals': '目標',
    'nav.health': '健康',
    'nav.social': 'ソーシャル',
    'nav.settings': '設定',
    'nav.sync': '同期',
    'dashboard.title': 'ダッシュボード',
    'dashboard.welcome': 'おかえりなさい',
    'dashboard.widgets': 'ウィジェット',
    'dashboard.customize': 'カスタマイズ',
    'dashboard.focusMode': '集中モード',
    'dashboard.quickCapture': 'クイックキャプチャ',
    'notes.title': 'ノート',
    'notes.new': '新規ノート',
    'notes.untitled': '無題',
    'notes.lastEdited': '最終編集',
    'notes.tags': 'タグ',
    'notes.backlinks': 'バックリンク',
    'notes.noNotes': 'ノートがありません',
    'tasks.title': 'タスク',
    'tasks.new': '新規タスク',
    'tasks.completed': '完了',
    'tasks.pending': '未完了',
    'tasks.overdue': '期限切れ',
    'tasks.dueToday': '今日が期限',
    'tasks.priority': '優先度',
    'tasks.high': '高',
    'tasks.medium': '中',
    'tasks.low': '低',
    'projects.title': 'プロジェクト',
    'projects.new': '新規プロジェクト',
    'projects.active': 'アクティブ',
    'projects.archived': 'アーカイブ',
    'projects.overview': '概要',
    'projects.timeline': 'タイムライン',
    'projects.kanban': 'カンバン',
    'projects.risks': 'リスク',
    'settings.title': '設定',
    'settings.general': '一般',
    'settings.appearance': '外観',
    'settings.language': '言語',
    'settings.theme': 'テーマ',
    'settings.darkMode': 'ダークモード',
    'settings.lightMode': 'ライトモード',
    'settings.systemTheme': 'システム',
    'settings.sync': '同期',
    'settings.backup': 'バックアップ',
    'settings.security': 'セキュリティ',
    'settings.about': 'について',
    'settings.widgets': 'ウィジェット',
    'settings.features': '機能',
    'sync.title': '同期',
    'sync.devices': 'デバイス',
    'sync.history': '履歴',
    'sync.conflicts': '競合',
    'sync.lastSync': '最終同期',
    'sync.syncing': '同期中...',
    'sync.syncNow': '今すぐ同期',
    'sync.noDevices': 'デバイスなし',
    'ai.title': 'AIアシスタント',
    'ai.chat': 'チャット',
    'ai.summarize': '要約',
    'ai.generate': '生成',
    'ai.analyze': '分析',
    'ai.localModel': 'ローカルモデル',
    'ai.cloudModel': 'クラウドモデル',
    'ai.processing': '処理中...',
    'widgets.quickStats': '統計',
    'widgets.recentNotes': '最近のノート',
    'widgets.upcomingTasks': '今後のタスク',
    'widgets.habits': '習慣',
    'widgets.goals': '目標',
    'widgets.calendar': 'カレンダー',
    'widgets.focusTimer': 'タイマー',
    'widgets.mood': '気分',
    'widgets.health': '健康',
    'widgets.social': 'ソーシャル',
    'error.generic': 'エラーが発生しました',
    'error.network': 'ネットワークエラー',
    'error.notFound': '見つかりません',
    'error.unauthorized': '権限がありません',
    'error.validation': '検証エラー',
  },
  zh: {
    'common.save': '保存',
    'common.cancel': '取消',
    'common.delete': '删除',
    'common.edit': '编辑',
    'common.create': '创建',
    'common.search': '搜索',
    'common.settings': '设置',
    'common.loading': '加载中...',
    'common.error': '错误',
    'common.success': '成功',
    'common.confirm': '确认',
    'common.close': '关闭',
    'common.back': '返回',
    'common.next': '下一步',
    'common.previous': '上一步',
    'common.all': '全部',
    'common.none': '无',
    'common.yes': '是',
    'common.no': '否',
    'nav.dashboard': '仪表盘',
    'nav.notes': '笔记',
    'nav.tasks': '任务',
    'nav.projects': '项目',
    'nav.calendar': '日历',
    'nav.habits': '习惯',
    'nav.goals': '目标',
    'nav.health': '健康',
    'nav.social': '社交',
    'nav.settings': '设置',
    'nav.sync': '同步',
    'dashboard.title': '仪表盘',
    'dashboard.welcome': '欢迎回来',
    'dashboard.widgets': '小组件',
    'dashboard.customize': '自定义',
    'dashboard.focusMode': '专注模式',
    'dashboard.quickCapture': '快速捕获',
    'notes.title': '笔记',
    'notes.new': '新建笔记',
    'notes.untitled': '无标题',
    'notes.lastEdited': '最后编辑',
    'notes.tags': '标签',
    'notes.backlinks': '反向链接',
    'notes.noNotes': '暂无笔记',
    'tasks.title': '任务',
    'tasks.new': '新建任务',
    'tasks.completed': '已完成',
    'tasks.pending': '待处理',
    'tasks.overdue': '已逾期',
    'tasks.dueToday': '今日到期',
    'tasks.priority': '优先级',
    'tasks.high': '高',
    'tasks.medium': '中',
    'tasks.low': '低',
    'projects.title': '项目',
    'projects.new': '新建项目',
    'projects.active': '进行中',
    'projects.archived': '已归档',
    'projects.overview': '概览',
    'projects.timeline': '时间线',
    'projects.kanban': '看板',
    'projects.risks': '风险',
    'settings.title': '设置',
    'settings.general': '常规',
    'settings.appearance': '外观',
    'settings.language': '语言',
    'settings.theme': '主题',
    'settings.darkMode': '深色模式',
    'settings.lightMode': '浅色模式',
    'settings.systemTheme': '跟随系统',
    'settings.sync': '同步',
    'settings.backup': '备份',
    'settings.security': '安全',
    'settings.about': '关于',
    'settings.widgets': '小组件',
    'settings.features': '功能',
    'sync.title': '同步',
    'sync.devices': '设备',
    'sync.history': '历史',
    'sync.conflicts': '冲突',
    'sync.lastSync': '上次同步',
    'sync.syncing': '同步中...',
    'sync.syncNow': '立即同步',
    'sync.noDevices': '无设备',
    'ai.title': 'AI助手',
    'ai.chat': '聊天',
    'ai.summarize': '总结',
    'ai.generate': '生成',
    'ai.analyze': '分析',
    'ai.localModel': '本地模型',
    'ai.cloudModel': '云端模型',
    'ai.processing': '处理中...',
    'widgets.quickStats': '快速统计',
    'widgets.recentNotes': '最近笔记',
    'widgets.upcomingTasks': '即将到期',
    'widgets.habits': '习惯',
    'widgets.goals': '目标',
    'widgets.calendar': '日历',
    'widgets.focusTimer': '计时器',
    'widgets.mood': '心情',
    'widgets.health': '健康',
    'widgets.social': '社交',
    'error.generic': '发生错误',
    'error.network': '网络错误',
    'error.notFound': '未找到',
    'error.unauthorized': '未授权',
    'error.validation': '验证错误',
  },
  fa: {
    'common.save': 'ذخیره',
    'common.cancel': 'لغو',
    'common.delete': 'حذف',
    'common.edit': 'ویرایش',
    'common.create': 'ایجاد',
    'common.search': 'جستجو',
    'common.settings': 'تنظیمات',
    'common.loading': 'در حال بارگذاری...',
    'common.error': 'خطا',
    'common.success': 'موفقیت',
    'common.confirm': 'تأیید',
    'common.close': 'بستن',
    'common.back': 'بازگشت',
    'common.next': 'بعدی',
    'common.previous': 'قبلی',
    'common.all': 'همه',
    'common.none': 'هیچکدام',
    'common.yes': 'بله',
    'common.no': 'خیر',
    'nav.dashboard': 'داشبورد',
    'nav.notes': 'یادداشت‌ها',
    'nav.tasks': 'وظایف',
    'nav.projects': 'پروژه‌ها',
    'nav.calendar': 'تقویم',
    'nav.habits': 'عادت‌ها',
    'nav.goals': 'اهداف',
    'nav.health': 'سلامت',
    'nav.social': 'اجتماعی',
    'nav.settings': 'تنظیمات',
    'nav.sync': 'همگام‌سازی',
    'dashboard.title': 'داشبورد',
    'dashboard.welcome': 'خوش آمدید',
    'dashboard.widgets': 'ویجت‌ها',
    'dashboard.customize': 'سفارشی‌سازی',
    'dashboard.focusMode': 'حالت تمرکز',
    'dashboard.quickCapture': 'ثبت سریع',
    'notes.title': 'یادداشت‌ها',
    'notes.new': 'یادداشت جدید',
    'notes.untitled': 'بدون عنوان',
    'notes.lastEdited': 'آخرین ویرایش',
    'notes.tags': 'برچسب‌ها',
    'notes.backlinks': 'پیوندها',
    'notes.noNotes': 'یادداشتی وجود ندارد',
    'tasks.title': 'وظایف',
    'tasks.new': 'وظیفه جدید',
    'tasks.completed': 'انجام شده',
    'tasks.pending': 'در انتظار',
    'tasks.overdue': 'عقب‌افتاده',
    'tasks.dueToday': 'امروز',
    'tasks.priority': 'اولویت',
    'tasks.high': 'بالا',
    'tasks.medium': 'متوسط',
    'tasks.low': 'پایین',
    'projects.title': 'پروژه‌ها',
    'projects.new': 'پروژه جدید',
    'projects.active': 'فعال',
    'projects.archived': 'بایگانی',
    'projects.overview': 'نمای کلی',
    'projects.timeline': 'جدول زمانی',
    'projects.kanban': 'کانبان',
    'projects.risks': 'ریسک‌ها',
    'settings.title': 'تنظیمات',
    'settings.general': 'عمومی',
    'settings.appearance': 'ظاهر',
    'settings.language': 'زبان',
    'settings.theme': 'تم',
    'settings.darkMode': 'حالت تاریک',
    'settings.lightMode': 'حالت روشن',
    'settings.systemTheme': 'سیستم',
    'settings.sync': 'همگام‌سازی',
    'settings.backup': 'پشتیبان',
    'settings.security': 'امنیت',
    'settings.about': 'درباره',
    'settings.widgets': 'ویجت‌ها',
    'settings.features': 'ویژگی‌ها',
    'sync.title': 'همگام‌سازی',
    'sync.devices': 'دستگاه‌ها',
    'sync.history': 'تاریخچه',
    'sync.conflicts': 'تداخل‌ها',
    'sync.lastSync': 'آخرین همگام‌سازی',
    'sync.syncing': 'در حال همگام‌سازی...',
    'sync.syncNow': 'همگام‌سازی',
    'sync.noDevices': 'دستگاهی نیست',
    'ai.title': 'دستیار هوشمند',
    'ai.chat': 'چت',
    'ai.summarize': 'خلاصه',
    'ai.generate': 'تولید',
    'ai.analyze': 'تحلیل',
    'ai.localModel': 'مدل محلی',
    'ai.cloudModel': 'مدل ابری',
    'ai.processing': 'در حال پردازش...',
    'widgets.quickStats': 'آمار سریع',
    'widgets.recentNotes': 'یادداشت‌های اخیر',
    'widgets.upcomingTasks': 'وظایف پیش رو',
    'widgets.habits': 'عادت‌ها',
    'widgets.goals': 'اهداف',
    'widgets.calendar': 'تقویم',
    'widgets.focusTimer': 'تایمر',
    'widgets.mood': 'حالت',
    'widgets.health': 'سلامت',
    'widgets.social': 'اجتماعی',
    'error.generic': 'خطایی رخ داد',
    'error.network': 'خطای شبکه',
    'error.notFound': 'یافت نشد',
    'error.unauthorized': 'غیرمجاز',
    'error.validation': 'خطای اعتبارسنجی',
  },
} as const;

type TranslationMessages = typeof translations.en;

interface I18nState {
  locale: Locale;
  setLocale: (locale: Locale) => void;
  t: (key: TranslationKey) => string;
  getDirection: () => 'ltr' | 'rtl';
}

export const useI18n = create<I18nState>()(
  persist(
    (set, get) => ({
      locale: 'en',
      
      setLocale: (locale: Locale) => {
        set({ locale });
        // Update document direction for RTL languages
        document.documentElement.dir = SUPPORTED_LOCALES.find(l => l.code === locale)?.direction || 'ltr';
        document.documentElement.lang = locale;
      },
      
      t: (key: TranslationKey): string => {
        const { locale } = get();
        const messages = translations[locale] as TranslationMessages;
        return messages[key] || translations.en[key] || key;
      },
      
      getDirection: (): 'ltr' | 'rtl' => {
        const { locale } = get();
        return SUPPORTED_LOCALES.find(l => l.code === locale)?.direction || 'ltr';
      },
    }),
    {
      name: 'noteece-i18n',
      partialize: (state) => ({ locale: state.locale }),
    }
  )
);

/**
 * Get translated text
 */
export const t = (key: TranslationKey): string => {
  return useI18n.getState().t(key);
};

/**
 * Hook to get the current locale info
 */
export const useLocaleInfo = (): LocaleInfo => {
  const locale = useI18n((state) => state.locale);
  return SUPPORTED_LOCALES.find((l) => l.code === locale) || SUPPORTED_LOCALES[0];
};

